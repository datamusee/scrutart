<!-- templates/result_gallery_upload.html -->
{% extends "base.html" %}

{% block title %}Résultat - Upload galerie{% endblock %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-md-10">
        <div class="card shadow">
            <div class="card-body">
                <div class="text-center mb-4">
                    <div class="text-success">
                        <svg xmlns="http://www.w3.org/2000/svg" width="80" height="80" fill="currentColor" class="bi bi-check-circle" viewBox="0 0 16 16">
                            <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>
                            <path d="M10.97 4.97a.235.235 0 0 0-.02.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-1.071-1.05z"/>
                        </svg>
                    </div>
                    <h2 class="card-title text-success mt-3">✅ Upload vers la galerie terminé</h2>
                </div>

                {% if result.upload_result %}
                <div class="alert alert-success">
                    <strong>{{ result.upload_result.message }}</strong>
                </div>

                <div class="row">
                    <div class="col-md-6">
                        <div class="card mb-3">
                            <div class="card-header bg-success text-white">
                                <h5 class="mb-0">📊 Statistiques</h5>
                            </div>
                            <div class="card-body">
                                <p><strong>Images uploadées :</strong> {{ result.upload_result.uploaded_count }}</p>
                                <p><strong>Statut :</strong>
                                    <span class="badge bg-{{ 'success' if result.upload_result.status == 'success' else 'danger' }}">
                                        {{ result.upload_result.status }}
                                    </span>
                                </p>
                                <p class="mb-0"><strong>Date :</strong> {{ result.completed_at }}</p>
                            </div>
                        </div>
                    </div>

                    <div class="col-md-6">
                        <div class="card mb-3">
                            <div class="card-header bg-info text-white">
                                <h5 class="mb-0">🔗 Accès</h5>
                            </div>
                            <div class="card-body">
                                {% if result.upload_result.gallery_url %}
                                <p><strong>URL de la galerie :</strong></p>
                                <a href="{{ result.upload_result.gallery_url }}" target="_blank" class="btn btn-info btn-sm">
                                    🌐 Ouvrir la galerie
                                </a>
                                {% else %}
                                <p class="text-muted">URL de galerie non disponible</p>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Détails techniques -->
                <div class="card mt-3">
                    <div class="card-header">
                        <h5 class="mb-0">🔧 Détails techniques</h5>
                    </div>
                    <div class="card-body">
                        <pre class="bg-light p-3 rounded"><code>{{ result.upload_result | tojson(indent=2) }}</code></pre>
                    </div>
                </div>
                {% endif %}

                <div class="mt-4 text-center">
                    <a href="{{ url_for('step_gallery_upload') }}" class="btn btn-success">
                        📤 Nouvel upload
                    </a>
                    <a href="{{ url_for('menu') }}" class="btn btn-outline-primary">
                        🏠 Retour au menu
                    </a>
                    <a href="{{ url_for('index') }}" class="btn btn-outline-secondary">
                        🔍 Nouvelle recherche
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}