<!-- templates/result_wordpress.html -->
{% extends "base.html" %}

{% block title %}R√©sultat - Post WordPress{% endblock %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-md-10">
        <div class="card shadow">
            <div class="card-body">
                <div class="text-center mb-4">
                    <div class="text-warning">
                        <svg xmlns="http://www.w3.org/2000/svg" width="80" height="80" fill="currentColor" class="bi bi-wordpress" viewBox="0 0 16 16">
                            <path d="M12.633 7.653c0-.848-.305-1.435-.566-1.892l-.08-.13c-.317-.51-.594-.958-.594-1.48 0-.63.478-1.218 1.152-1.218q.03 0 .058.003l.031.003A6.84 6.84 0 0 0 8 1.137 6.86 6.86 0 0 0 2.266 4.23c.16.005.313.009.442.009.717 0 1.828-.087 1.828-.087.37-.022.414.521.044.565 0 0-.371.044-.785.065l2.5 7.434 1.5-4.506-1.07-2.929c-.369-.022-.719-.065-.719-.065-.37-.022-.326-.588.043-.566 0 0 1.134.087 1.808.087.717 0 1.83-.087 1.83-.087.37-.022.413.522.043.566 0 0-.372.043-.785.065l2.48 7.377.684-2.287.054-.173c.27-.86.469-1.495.469-2.046zM1.137 8a6.86 6.86 0 0 0 3.868 6.176L1.73 5.206A6.8 6.8 0 0 0 1.137 8"/>
                            <path d="M6.061 14.583 8.121 8.6l2.109 5.78q.02.05.049.094a6.85 6.85 0 0 1-4.218.109m7.96-9.876q.046.328.047.706c0 .696-.13 1.479-.522 2.458l-2.096 6.06a6.86 6.86 0 0 0 2.572-9.224z"/>
                            <path fill-rule="evenodd" d="M0 8c0-4.411 3.589-8 8-8s8 3.589 8 8-3.589 8-8 8-8-3.589-8-8m.367 0c0 4.209 3.424 7.633 7.633 7.633S15.632 12.209 15.632 8C15.632 3.79 12.208.367 8 .367 3.79.367.367 3.79.367 8"/>
                        </svg>
                    </div>
                    <h2 class="card-title text-warning mt-3">‚úÖ Post WordPress cr√©√©</h2>
                </div>

                {% if result.wordpress_result %}
                <div class="alert alert-{{ 'success' if result.wordpress_result.status == 'success' else 'warning' }}">
                    <strong>{{ result.wordpress_result.message }}</strong>
                </div>

                <div class="card mb-3">
                    <div class="card-header bg-warning text-dark">
                        <h5 class="mb-0">üìÑ Aper√ßu du post</h5>
                    </div>
                    <div class="card-body">
                        <h4>{{ result.wordpress_result.title }}</h4>
                        <hr>
                        <div class="post-content">
                            {{ result.wordpress_result.content | safe }}
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-6">
                        <div class="card mb-3">
                            <div class="card-header bg-info text-white">
                                <h5 class="mb-0">üè∑Ô∏è M√©tadonn√©es</h5>
                            </div>
                            <div class="card-body">
                                <p><strong>Cat√©gories :</strong></p>
                                <div class="mb-2">
                                    {% for category in result.wordpress_result.categories %}
                                    <span class="badge bg-primary me-1">{{ category }}</span>
                                    {% endfor %}
                                </div>

                                <p><strong>Tags :</strong></p>
                                <div>
                                    {% for tag in result.wordpress_result.tags %}
                                    <span class="badge bg-secondary me-1">{{ tag }}</span>
                                    {% endfor %}
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="col-md-6">
                        <div class="card mb-3">
                            <div class="card-header bg-success text-white">
                                <h5 class="mb-0">üìä Informations</h5>
                            </div>
                            <div class="card-body">
                                <p><strong>ID du post :</strong>
                                    {% if result.wordpress_result.post_id %}
                                        {{ result.wordpress_result.post_id }}
                                    {% else %}
                                        <span class="text-muted">Non publi√© (brouillon)</span>
                                    {% endif %}
                                </p>
                                <p><strong>Statut :</strong>
                                    <span class="badge bg-{{ 'success' if result.wordpress_result.status == 'success' else 'danger' }}">
                                        {{ result.wordpress_result.status }}
                                    </span>
                                </p>
                                <p class="mb-0"><strong>Cr√©√© le :</strong> {{ result.completed_at }}</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Actions -->
                {% if result.wordpress_result.post_id %}
                <div class="card mb-3">
                    <div class="card-header bg-primary text-white">
                        <h5 class="mb-0">üîó Actions</h5>
                    </div>
                    <div class="card-body text-center">
                        <a href="#" class="btn btn-primary" target="_blank">
                            üåê Voir le post sur WordPress
                        </a>
                        <a href="#" class="btn btn-secondary" target="_blank">
                            ‚úèÔ∏è √âditer le post
                        </a>
                    </div>
                </div>
                {% endif %}

                <!-- D√©tails techniques -->
                <div class="card mt-3">
                    <div class="card-header">
                        <button class="btn btn-sm btn-outline-secondary" type="button" data-bs-toggle="collapse" data-bs-target="#technicalDetails">
                            üîß Afficher les d√©tails techniques
                        </button>
                    </div>
                    <div id="technicalDetails" class="collapse">
                        <div class="card-body">
                            <pre class="bg-light p-3 rounded"><code>{{ result.wordpress_result | tojson(indent=2) }}</code></pre>
                        </div>
                    </div>
                </div>
                {% endif %}

                <div class="mt-4 text-center">
                    <a href="{{ url_for('step_wordpress') }}" class="btn btn-warning">
                        üìù Nouveau post
                    </a>
                    <a href="{{ url_for('menu') }}" class="btn btn-outline-primary">
                        üè† Retour au menu
                    </a>
                    <a href="{{ url_for('index') }}" class="btn btn-outline-secondary">
                        üîç Nouvelle recherche
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
.post-content {
    background-color: #f8f9fa;
    padding: 20px;
    border-radius: 5px;
    max-height: 400px;
    overflow-y: auto;
}
.post-content h2, .post-content h3 {
    color: #495057;
    margin-top: 15px;
}
.post-content p {
    margin-bottom: 10px;
}
</style>
{% endblock %}