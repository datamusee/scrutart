{% extends "base.html" %}

{% block content %}
<div class="docs-container">
    <h1>ğŸ“š Documentation API</h1>
    
    <section class="doc-section">
        <h2>ğŸ” Authentification</h2>
        <p>Toutes les requÃªtes nÃ©cessitent un token JWT.</p>
        
        <h3>Se connecter</h3>
        <pre><code>GET /login</code></pre>
        <p>Redirige vers Google OAuth pour l'authentification.</p>
        
        <h3>RÃ©cupÃ©rer le token</h3>
        <pre><code>GET /token</code></pre>
        <p>Retourne le token JWT de l'utilisateur connectÃ©.</p>
    </section>
    
    <section class="doc-section">
        <h2>ğŸ“Š GraphQL</h2>
        
        <h3>Endpoint principal</h3>
        <pre><code>POST /graphql
Authorization: Bearer &lt;token&gt;
Content-Type: application/json

{
  "query": "query { allPaintings { id title } }",
  "variables": {}
}</code></pre>
    </section>
    
    <section class="doc-section">
        <h2>ğŸ“ Exemples GraphQL</h2>
        
        <h3>RequÃªte simple</h3>
        <pre><code>query {
  getPainting(id: "http://example.org/painting/1") {
    id
    title
  }
}</code></pre>
        
        <h3>Mutation - CrÃ©er</h3>
        <pre><code>mutation {
  createPainting(
    id: "http://example.org/painting/new"
    data: "{\"title\": \"Mona Lisa\"}"
  ) {
    success
    entity
  }
}</code></pre>
    </section>
    
    <section class="doc-section">
        <h2>âš™ï¸ Administration</h2>
        
        <h3>RÃ©gÃ©nÃ©rer le schÃ©ma</h3>
        <pre><code>POST /schema/refresh
Authorization: Bearer &lt;token&gt;</code></pre>
        
        <h3>Vider le cache</h3>
        <pre><code>POST /cache/clear
Authorization: Bearer &lt;token&gt;</code></pre>
    </section>
</div>
{% endblock %}
